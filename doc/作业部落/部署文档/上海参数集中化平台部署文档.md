# 上海参数集中化平台部署文档

标签（空格分隔）： 部署文档

---
- 服务器信息

部署服务器：
```
生产环境
10.221.33.175 9041

连接的是10.11.126.116【浮动IP，主要使用这个】 10.101.5.119【业务IP】 199.0.6.85【该IP我们无法使用】

boco
WbYoTcPo2@

root
BCli@1088

端口

8500
8550
8700
8751
8752
8753
8754
8755
30010
30015
30030
30100
30105
30520
30524
30528



有空间可以使用的目录为/opt


测试环境

安装在/usr/local/nginx/
登录用户密码都和其他的机器一样
就设置了/etc/profile的环境变量，其他的没动
设备ip,10.11.126.117
连接的话,连接10.221.233.13:8900


http://10.11.126.117:8752/#/commandQuery
```

诺西omc服务器：
```
omc:10.222.6.20    omc  N1amgod_

10.222.29.220   omc N1amgod_

导出目录
/d/oss/global/var/racops/export

导入目录
/d/oss/global/var/racops/import

```

redis集群服务：
```
10.11.126.118(10.101.5.121)
/usr/local/bin

垂直集群开启：
/usr/local/src/redis-3.2.9/src/redis-trib.rb create --replicas 1 IP:7001  IP:7002  \
IP:7003  IP:7004  IP:7005  IP:7006



/opt/redis-3.2.9/src/redis-trib.rb create --replicas 1 

/opt/redis-3.2.9/src/redis-trib.rb create --replicas 1 10.11.126.118:7000  10.11.126.118:7001  10.11.126.118:7002  10.11.126.118:7003  10.11.126.118:7004  10.11.126.118:7005








```

- Nginx前端部署

Nginx目录：
```
/usr/local/nginx/web/


./nginx -c 

login 框架前端
pigon 参数业务前端
```
`前端更新只需将原有dist删除再把打好的dist包放到相应目录下即login或pigon目录下`
- 后端服务部署
部署位置：
```
/opt/java-pigeon
目录下根据不同jar包分文件夹存放

```
部署操作
```
查看java进程
ps -ef | grep java
杀死要重新部署的java进程
kill -9 8521
进入jar包所在的目录，启动jar包
nohup java -Dfile.encoding=UTF-8 -jar XXX.jar &
nohup >/dev/null 2>&1  &
查看进程，线程数量
ps -hH -p 10504 | wc -l


hsql=`ps -ef | grep -v grep| grep hsqldb.jar | awk '{print $2}'`
kill $hsql
```

VPN 
```
gk.sh.chinamobile.com
yy_yangyang
Zdhszyzs#1      

vpn3
Cv5jJae0
443

```
远程桌面
```
10.221.177.12:9833  admin WbYoTcPo3#

10.221.233.13:9034
admin
windows123!@#

```



```
8105:NOKIA-CMSH-SH,SubNetwork=Nokia-103270,ManagedElement=MRBTS-101461,EnbFunction=LNBTS-101461,EutranCellTdd=LNCEL-21
```

参数查询修改流程图

```flow
st=>start: Start
io=>inputoutput: 文件导入/页面操作
op=>operation: 网元数据、参数数据 
cond=>condition: 成功组装参数查询指令
sub=>subroutine: 网元、参数不存在
op1=>operation: 指令平台
op2=>operation: omc执行指令
io1=>inputoutput: 指令执行日志/xml文件
op3=>operation: 参数查询结果解析
e=>end

st->io->op->cond
cond(yes)->op1->op2->op3->e
cond(no)->sub->io
```


参数修改流程图

```flow
st=>start: Start
io=>inputoutput: 文件导入/页面操作
op=>operation: 网元数据、参数数据 
cond=>condition: 成功组装参数修改指令/xml文件
sub=>subroutine: 网元、参数不存在
cond1=>condition: 参数修改指令变量是否缺失
sub1=>subroutine: 变量缺失
op1=>operation: 指令平台 
op2=>operation: omc执行指令 
io1=>inputoutput: 指令执行日志/xml文件
op3=>operation: 参数查询结果解析
e=>end

st->io->op->cond
cond(yes)->cond1
cond(no)->sub->io
cond1(yes)->op1->op2->io1->op3->e
cond1(no)->sub1->io
```



