# 通用数据上报

标签（空格分隔）： 设计文档

---

## DB设计
### 自动上报任务表(tap_gen_auto_report_task)
| 字段名        | 类型   |  说明  |
| --------   | -----  | ----  |
| int_id        |   INTEGER   |   唯一ID   |
| name        |   VARCHAR2(100)   |   名称   |
| type        |   INTEGER   |   任务类型（1、数据查询模板上报，2、专题报表上报）   |
| relate_id         |   INTEGER   |   关联编号（类型为数据查询模板上报关联模板表，专题报表上报关联专题报表信息）   |
| delay_granularity_max_count        |   INTEGER   |   数据推迟粒度最大数量   | 
| delay_granularity_min_count        |   INTEGER   |   数据推迟粒度最小数量   | 
| time_granularity        |   INTEGER   |   时间粒度（1：天 ，  2：周 ，3：月）   |
| select_time_list        |   VARCHAR2(200)   |   执行的时间点：当时间粒度为天时，保存24小时中小时时间点 8,9,10  表示每天8点、9点、10点执行;当时间粒度为周时，保存一周中的周几 1,2   表示周1和周2执行;当时间粒度为月时，保存一月中的某天 1,28 表示每月1号和28号执行   |
| run_modal        |   INTEGER   |   运行模式（1：执行一次  0：重复执行）  |
|  run_time_from        |   DATE   |   执行有效期的开始时间   |
|  run_time_to        |   DATE   |   执行有效期的结束时间   |
|  ftp_iP        |   VARCHAR2(20)   |   FTP IP地址   |
|  ftp_port        |   INTEGER   |   ftp端口   |
|  ftp_user        |   VARCHAR2(50)   |   FTP 用户名   |
|  ftp_pwd        |   VARCHAR2(50)   |   FTP    |
|  email_host        |   VARCHAR2(100)   |   邮箱地址   |
|  email_pwd        |   VARCHAR2(100)   |   邮箱密码   |
|  email_from        |   VARCHAR2(100)   |   邮件发送人   |
|  email_to        |   VARCHAR2(200)   |   邮件接收人，多人用逗号分隔   |
|  OPERATE_USER_ID        |   VARCHAR2(100)   |   操作人编号   |
|  OPERATE_USER_NAME        |   VARCHAR2(100)   |   操作人名称   |
|  INSERT_TIME        |   DATE   |   插入时间   |





### 专题报表信息(tap_gen_special_report)

| 字段名        | 类型   |  说明  |
| --------   | -----  | ----  |
| int_id        |   INTEGER   |   唯一ID   |
| url        |   VARCHAR2(200)   |  专题报表微服务接口URL  |
| sum_level         |   INTEGER   |   时间汇总粒度   |
| ne_type        |   INTEGER   |   网元粒度   |
| region_ids        |   VARCHAR2(250)   |   地市编号集合，逗号间隔   |
| ne_ids        |   VARCHAR2(250)   |   网元编号集合，逗号间隔   |
| ne_group_ids        |   VARCHAR2(250)   |   网元组编号集合，逗号间隔   |
| param1        |   VARCHAR2(250)   |   预留参数1   |
| param2        |   VARCHAR2(250)   |   预留参数2   |
 
 
### 自动上报任务执行日志表(tap_gen_auto_report_log)

| 字段名        | 类型   |  说明  |
| --------   | -----  | ----  |
| int_id        |   INTEGER   |   唯一ID   |
| task_id        |   INTEGER   |   自动上报任务ID   |
| scan_start_time        |   Date   |   开始时间   |
| scan_end_time        |   Date   |   结束时间   |
| task_start_time        |   Date   |   任务开始时间   |
| task_end_time        |   Date   |   任务结束时间   |
| is_succeed        |   INTEGER   |   是否成功（0失败，1成功）   |
| log_content        |   CLOB    |   日志   |

















