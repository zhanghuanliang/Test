# 指令查询模块设计

标签（空格分隔）： 模块设计

---

[TOC]

一、DB设计
--
### 1、参数字典表
TAP_PIGEON_PARAMETER_SH
```
 create table TAP_PIGEON_PARAMETER_SH
(
  id                 VARCHAR2(32),`参数唯一标识`
  zh_name            VARCHAR2(256),`参数中文名称`
  en_name            VARCHAR2(64),`参数英文名称`
  parameter_category VARCHAR2(8),`参数类别（A类、B类、C类）`
  parameter_level    VARCHAR2(64),`参数级别`
  data_type          VARCHAR2(32),`参数值类型（复合类型、枚举类型）`
  data_unit          VARCHAR2(32),`参数单位（未用的）`
  data_limit         VARCHAR2(2048),`参数值取值范围`
  vendor_id          INTEGER,`厂家id`
  query_command_text VARCHAR2(256),`参数查询指令文本`
  alter_command_text VARCHAR2(256),`参数修改指令文本`
  parameter_group    VARCHAR2(256),`中文参数组（影响范围）`
  param_type         VARCHAR2(32)`英文参数类型（新增）`
)
```
数据库数据示例：
```
1	HW-V100R011-2113	本地小区标识	LocalCellId	C	小区	区间数值类型	无	0~255	8	LST WtcpProxyAlgo:LOCALCELLID=XX;	MOD WTCPPROXYALGO:LOCALCELLID=XXX;	W-TCP代理算法	WtcpProxyAlgo
2	HW-V100R011-2114	TCP加速开关	TcpAccelerationSwitch	C	小区	枚举数值类型	无	OFF(关), ON(开)	8	LST WtcpProxyAlgo:LOCALCELLID=XX;	MOD WTCPPROXYALGO:LOCALCELLID=XXX,TCPACCELERATIONSWITCH=XXX;	W-TCP代理算法	WtcpProxyAlgo
3	HW-V100R011-2115	TCP统计功能开关	TCPStatisticsSwitch	C	小区	枚举数值类型	无	OFF(关), ON(开)	8	LST WtcpProxyAlgo:LOCALCELLID=XX;	MOD WTCPPROXYALGO:LOCALCELLID=XXX,TCPSTATISTICSSWITCH=XXX;	W-TCP代理算法	WtcpProxyAlgo
4	HW-V100R011-2116	最大RTT统计门限(毫秒)	MaxRttStatisticsThd	C	小区	区间数值类型	毫秒	100~3000	8	LST WtcpProxyAlgo:LOCALCELLID=XX;	MOD WTCPPROXYALGO:LOCALCELLID=XXX,MAXRTTSTATISTICSTHD=XXX;	W-TCP代理算法	WtcpProxyAlgo
5	HW-V100R008-1153	上行空口允许的语音包时延抖动最大值(毫秒)	ULDelayJitter	C	基站	区间数值类型	毫秒	1~255	8	LST VQMALGO:;	MOD VQMALGO:ULDELAYJITTER=XXX;	语音质量监控算法	VQMALGO
6	HW-V100R011-1733	VQI Good判决门限	VqiGoodThd	C	基站	区间数值类型	无	0~5，步长：0.01	8	LST VQMALGO:;	MOD VQMALGO:VQIGOODTHD=XXX;	语音质量监控算法	VQMALGO
7	HW-V100R010-1734	VQI Poor判决门限	VqiPoorThd	C	基站	区间数值类型	无	0~5，步长：0.01	8	LST VQMALGO:;	MOD VQMALGO:VQIPOORTHD=XXX;	语音质量监控算法	VQMALGO

```
二、指令查询模块设计
---
### 1、参数操作指令变量模型
- CommandBaseVariableEntity
```
/**
	 * 变量1
	 */
	protected String firstVariable;
	/**
	 * 变量2
	 */
	protected String secondVariable;
	/**
	 * 移动国家码（MCC）
	 */
	protected String mcc;
	/**
	 * 移动网络码（MNC)
	 */
	protected String mnc;
	/**
	 * BCCH组标识(BcchGroupId)
	 */
	protected String bcchGroupId;
	/**
	 * GERAN频点(GeranArfcn)
	 */
	protected String geranArfcn;

	/**
	 * 位置区域码(lac)
	 */
	protected String lac;
	/**
	 * GERAN小区标识(cellid)
	 */
	protected String geranCellId;
	/**
	 * UTRANCELL下行频点(UtranDlArfcn)
	 */
	protected String utrandlArfcn;
	/**
	 * RNC标识(RNCID)
	 */
	protected String rncId;

	/**
	 * RNC小区标识(cellid)
	 */
	protected String rncCellId;
	/**
	 * UTRANCELL频带（FreqBand）
	 */
	protected String utranCellFreqBand;
	/**
	 * EUTRANCELL下行频点(DlEarfcn)
	 */
	protected String dlEarfcn;
	/**
	 * 基站标识(ENODEBID)
	 */
	protected String enodebId;
	/**
	 * 小区标识(ENODEBID)
	 */
	protected String cellId;
	/**
	 * EUTRANCELL频段（FreqBand）
	 */
	protected String eutranCellfreqBand;
```

### 2、参数查询excel导入模板模型
- ParameterQueryExcelEntity `extends CommandBaseVariableEntity`
```
	/**
	 * CGI
	 */
	private String cgi;
	/**
	 * 参数名称
	 */
	private String parameterName;
	/**
	 * 参数组
	 */
	private String parameterGroup;
	/**
	 * 邻区CGI
	 */
	private String adjacentAreaCgi;
```
### 3、参数查询前端界面采集信息模型
- ParameterQueryWebEntity `extends CommandBaseVariableEntity`
```
	/**
	 * CGI
	 */
	private String cgi;
	/**
	 * 参数名称
	 */
	private String parameterName;
	/**
	 * 参数组
	 */
	private String parameterGroup;
	/**
	 * 邻区CGI
	 */
	private String adjacentAreaCgi;
	/**
	 * 基站名称
	 */
	private String enodebName;
	/**
	 * 本地小区标识
	 */
	private String localCellId;
	/**
	 * 参数查询命令
	 */
	private String queryCommandText;
```


### 2、参数查询指令模型
- ParameterQueryCommandEntity
```
/**
	 * CGI
	 */
	private String cgi;
	/**
	 * 基站名称
	 */
	private String enodebName;

	/**
	 * 参数名称
	 */
	private String parameterName;
	/**
	 * 厂家名称
	 */
	private String vendorName;
	/**
	 * 邻区CGI
	 */
	private String adjacentAreaCgi;
	/**
	 * 参数查询命令
	 */
	private String queryCommandText;

	/**
	 * 参数查询结果
	 */
	private String queryResultText;

	/**
	 * 参数查询值
	 */
	private List<String> parameterValue;

	/**
	 * 参数查询校验信息
	 */
	private String parameterCheckText;
	/**
	 * 指令参数校验
	 */
	private Boolean checked;
```
三、指令查询流程图
-
### 1、参数查询前端导入excel文件查询

```flow
st=>start
io=>inputoutput: 参数查询导入模板.xlsx
op1=>operation: 校验所查询的参数及小区是否存在
op2=>operation: 获取基站名称，localhostCellId等参数查询必要信息
op3=>operation: 校验指令中每个变量取值，记录，并组装指令
cond=>condition: 是否校验通过?
op4=>operation: 执行指令，获取指令执行结果，解析出查询参数值
out=>inputoutput: 参数查询指令模型数据
e=>end

st->io->op1->op2->op3->cond
cond(yes)->op4->out->e
cond(no)->out->e
```
### 2、参数查询前端界面采集数据查询
```flow
st=>start
io=>inputoutput: 参数查询前端界面采集信息模型集合
op1=>operation: 校验指令中每个变量取值，记录，并组装指令
cond=>condition: 是否校验通过?
op4=>operation: 执行指令，获取指令执行结果，解析出查询参数值
out=>inputoutput: 参数查询指令模型数据
e=>end

st->io->op1->cond
cond(yes)->op4->out->e
cond(no)->out->e
```







